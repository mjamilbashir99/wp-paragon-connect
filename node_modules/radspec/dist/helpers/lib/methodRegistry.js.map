{"version":3,"sources":["../../../src/helpers/lib/methodRegistry.js"],"names":["REGISTRY_LOOKUP_ABI","REGISTRY_MAP","MethodRegistry","constructor","opts","provider","ethers","providers","WebSocketProvider","DEFAULT_ETH_NODE","registryAddres","registry","network","initRegistry","Error","Contract","lookup","sigBytes","entries"],"mappings":"6JAAA;KAKMA,CAAAA,mBAAmB,CAAG,CAC1B,uDAD0B,C,CAKtBC,YAAY,CAAG,CACnB,EAAG,4CADgB,C,CADrB;AAKe,KAAMC,CAAAA,cAAe,CAClCC,WAAW,CAAEC,IAAI,CAAG,EAAT,CAAa,CACtB,KAAKC,QAAL,CACED,IAAI,CAACC,QAAL,EAAiB,GAAIC,gBAAOC,SAAP,CAAiBC,iBAArB,CAAuCC,0BAAvC,CAFG,CAGtB,KAAKC,cAAL,CAAsBN,IAAI,CAACO,QAAL,EAAiBV,YAAY,CAACG,IAAI,CAACQ,OAAN,CACpD,CAED,KAAMC,CAAAA,YAAN,EAAsB,CACpB,GAAI,CAAC,KAAKH,cAAV,CACE,KAAM,IAAII,CAAAA,KAAJ,CAAU,2CAAV,CAAN,CAGF,KAAKH,QAAL,CAAgB,GAAIL,gBAAOS,QAAX,CACd,KAAKL,cADS,CAEdV,mBAFc,CAGd,KAAKK,QAHS,CAKjB,CAED,KAAMW,CAAAA,MAAN,CAAcC,QAAd,CAAwB,CAKtB,MAJK,MAAKN,QAIV,GAHE,KAAM,MAAKE,YAAL,EAGR,EAAO,KAAKF,QAAL,CAAcO,OAAd,CAAsBD,QAAtB,CACR,CAzBiC,C","sourcesContent":["// From: https://github.com/danfinlay/eth-method-registry\nimport { ethers } from 'ethers'\n\nimport { DEFAULT_ETH_NODE } from '../../defaults'\n\nconst REGISTRY_LOOKUP_ABI = [\n  'function entries(bytes4) public view returns (string)'\n]\n\n// networkId -> registry address\nconst REGISTRY_MAP = {\n  1: '0x44691B39d1a75dC4E0A0346CBB15E310e6ED1E86'\n}\n\nexport default class MethodRegistry {\n  constructor (opts = {}) {\n    this.provider =\n      opts.provider || new ethers.providers.WebSocketProvider(DEFAULT_ETH_NODE)\n    this.registryAddres = opts.registry || REGISTRY_MAP[opts.network]\n  }\n\n  async initRegistry () {\n    if (!this.registryAddres) {\n      throw new Error('No method registry found for the network.')\n    }\n\n    this.registry = new ethers.Contract(\n      this.registryAddres,\n      REGISTRY_LOOKUP_ABI,\n      this.provider\n    )\n  }\n\n  async lookup (sigBytes) {\n    if (!this.registry) {\n      await this.initRegistry()\n    }\n\n    return this.registry.entries(sigBytes)\n  }\n}\n"],"file":"methodRegistry.js"}