{"id":"bpDV","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595838175389},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\package.json","includedInParent":true,"mtime":1595838173348},{"name":"@babel/runtime/helpers/interopRequireDefault","loc":{"line":1,"column":48},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@babel\\runtime\\helpers\\interopRequireDefault.js"},{"name":"@babel/runtime/helpers/defineProperty","loc":{"line":1,"column":226},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@babel\\runtime\\helpers\\defineProperty.js"},{"name":"ethers","loc":{"line":1,"column":284},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\ethers\\dist\\ethers.umd.js"},{"name":"./lib/methodRegistry","loc":{"line":1,"column":341},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\lib\\methodRegistry.js"},{"name":"../lib/","loc":{"line":1,"column":379},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\lib\\index.js"},{"name":"../data/","loc":{"line":1,"column":404},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\data\\index.js"},{"name":"../defaults","loc":{"line":1,"column":434},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\radspec.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\defaults.js"}],"generated":{"js":"\"use strict\";var e=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=e(require(\"@babel/runtime/helpers/defineProperty\")),r=require(\"ethers\"),n=e(require(\"./lib/methodRegistry\")),s=require(\"../lib/\"),i=require(\"../data/\"),a=require(\"../defaults\");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var r,n=1;n<arguments.length;n++)r=null==arguments[n]?{}:arguments[n],n%2?u(Object(r),!0).forEach(function(n){(0,t.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))});return e}const c=e=>({type:\"string\",value:`Unknown function (${e})`}),l=e=>{const t=r.ethers.utils.FunctionFragment.from(e);return{name:t.name.charAt(0).toUpperCase()+t.name.slice(1).split(/(?=[A-Z])/).join(\" \"),args:t.inputs.map(e=>({type:e.type}))}},p=e=>r.ethers.utils.hexDataSlice(r.ethers.utils.id(e),0,4),f=e=>Object.keys(e).reduce((t,n)=>{const s=r.ethers.utils.FunctionFragment.from(n);return o({[p(s.format())]:{source:e[n],fragment:s}},t)},{});var y=(e,t)=>async(u,p,y)=>{const b=f(i.knownFunctions);if(10>p.length)return c(p);const d=p.substr(0,10),g=b[d];if(!g)try{const t=new n.default({registryAddress:y,provider:e,network:y?void 0:(await e.getNetwork()).chainId}),s=await t.lookup(d),{name:i}=l(s);return{type:\"string\",value:i}}catch{const{results:e}=await r.ethers.utils.fetchJson(`${a.DEFAULT_API_4BYTES}?hex_signature=${d}`);if(Array.isArray(e)&&0<e.length){const{name:t}=l(e[0].text_signature);return{type:\"string\",value:t}}return c(d)}const{source:h,fragment:m}=g,O=new r.ethers.utils.Interface([m]).decodeFunctionData(m.name,p),v=m.inputs.reduce((e,t,r)=>o({[`$${r+1}`]:{type:t.type,value:O[r]}},e),{});return{type:\"string\",value:await(0,s.evaluateRaw)(h,v,{provider:e,availableHelpers:t.helpers.getHelpers(),to:u})}};exports.default=y;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/helpers/radspec.js","name":"makeUnknownFunctionNode","original":{"line":8,"column":6},"generated":{"line":1,"column":920}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":8,"column":33},"generated":{"line":1,"column":922}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":8,"column":32},"generated":{"line":1,"column":926}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":9,"column":2},"generated":{"line":1,"column":927}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":9,"column":8},"generated":{"line":1,"column":932}},{"source":"../../src/helpers/radspec.js","name":"value","original":{"line":10,"column":2},"generated":{"line":1,"column":941}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":10,"column":30},"generated":{"line":1,"column":968}},{"source":"../../src/helpers/radspec.js","name":"parse","original":{"line":13,"column":6},"generated":{"line":1,"column":975}},{"source":"../../src/helpers/radspec.js","name":"signature","original":{"line":13,"column":15},"generated":{"line":1,"column":977}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":981}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":14,"column":8},"generated":{"line":1,"column":987}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":14,"column":19},"generated":{"line":1,"column":989}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":14,"column":19},"generated":{"line":1,"column":991}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":14,"column":26},"generated":{"line":1,"column":998}},{"source":"../../src/helpers/radspec.js","name":"FunctionFragment","original":{"line":14,"column":32},"generated":{"line":1,"column":1004}},{"source":"../../src/helpers/radspec.js","name":"from","original":{"line":14,"column":49},"generated":{"line":1,"column":1021}},{"source":"../../src/helpers/radspec.js","name":"signature","original":{"line":14,"column":54},"generated":{"line":1,"column":1026}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":1029}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":16,"column":9},"generated":{"line":1,"column":1035}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":17,"column":4},"generated":{"line":1,"column":1036}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":18,"column":6},"generated":{"line":1,"column":1041}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":18,"column":15},"generated":{"line":1,"column":1043}},{"source":"../../src/helpers/radspec.js","name":"charAt","original":{"line":18,"column":20},"generated":{"line":1,"column":1048}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":18,"column":27},"generated":{"line":1,"column":1055}},{"source":"../../src/helpers/radspec.js","name":"toUpperCase","original":{"line":18,"column":30},"generated":{"line":1,"column":1058}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":19,"column":6},"generated":{"line":1,"column":1072}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":19,"column":15},"generated":{"line":1,"column":1074}},{"source":"../../src/helpers/radspec.js","name":"slice","original":{"line":20,"column":9},"generated":{"line":1,"column":1079}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":20,"column":15},"generated":{"line":1,"column":1085}},{"source":"../../src/helpers/radspec.js","name":"split","original":{"line":21,"column":9},"generated":{"line":1,"column":1088}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":21,"column":15},"generated":{"line":1,"column":1094}},{"source":"../../src/helpers/radspec.js","name":"join","original":{"line":22,"column":9},"generated":{"line":1,"column":1107}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":22,"column":14},"generated":{"line":1,"column":1112}},{"source":"../../src/helpers/radspec.js","name":"args","original":{"line":23,"column":4},"generated":{"line":1,"column":1117}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":23,"column":10},"generated":{"line":1,"column":1122}},{"source":"../../src/helpers/radspec.js","name":"inputs","original":{"line":23,"column":19},"generated":{"line":1,"column":1124}},{"source":"../../src/helpers/radspec.js","name":"map","original":{"line":23,"column":26},"generated":{"line":1,"column":1131}},{"source":"../../src/helpers/radspec.js","name":"input","original":{"line":23,"column":31},"generated":{"line":1,"column":1135}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":23,"column":30},"generated":{"line":1,"column":1139}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":24,"column":15},"generated":{"line":1,"column":1140}},{"source":"../../src/helpers/radspec.js","name":"input","original":{"line":24,"column":21},"generated":{"line":1,"column":1145}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":24,"column":27},"generated":{"line":1,"column":1147}},{"source":"../../src/helpers/radspec.js","name":"getSigHah","original":{"line":30,"column":6},"generated":{"line":1,"column":1157}},{"source":"../../src/helpers/radspec.js","name":"sig","original":{"line":30,"column":19},"generated":{"line":1,"column":1159}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":30,"column":27},"generated":{"line":1,"column":1162}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":30,"column":27},"generated":{"line":1,"column":1164}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":30,"column":34},"generated":{"line":1,"column":1171}},{"source":"../../src/helpers/radspec.js","name":"hexDataSlice","original":{"line":30,"column":40},"generated":{"line":1,"column":1177}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":30,"column":53},"generated":{"line":1,"column":1190}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":30,"column":53},"generated":{"line":1,"column":1192}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":30,"column":60},"generated":{"line":1,"column":1199}},{"source":"../../src/helpers/radspec.js","name":"id","original":{"line":30,"column":66},"generated":{"line":1,"column":1205}},{"source":"../../src/helpers/radspec.js","name":"sig","original":{"line":30,"column":69},"generated":{"line":1,"column":1208}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":30,"column":75},"generated":{"line":1,"column":1211}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":30,"column":78},"generated":{"line":1,"column":1213}},{"source":"../../src/helpers/radspec.js","name":"processFunctions","original":{"line":35,"column":6},"generated":{"line":1,"column":1216}},{"source":"../../src/helpers/radspec.js","name":"functions","original":{"line":35,"column":26},"generated":{"line":1,"column":1218}},{"source":"../../src/helpers/radspec.js","name":"Object","original":{"line":36,"column":2},"generated":{"line":1,"column":1221}},{"source":"../../src/helpers/radspec.js","name":"keys","original":{"line":36,"column":9},"generated":{"line":1,"column":1228}},{"source":"../../src/helpers/radspec.js","name":"functions","original":{"line":36,"column":14},"generated":{"line":1,"column":1233}},{"source":"../../src/helpers/radspec.js","name":"reduce","original":{"line":36,"column":25},"generated":{"line":1,"column":1236}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":36,"column":32},"generated":{"line":1,"column":1243}},{"source":"../../src/helpers/radspec.js","name":"acc","original":{"line":36,"column":33},"generated":{"line":1,"column":1244}},{"source":"../../src/helpers/radspec.js","name":"key","original":{"line":36,"column":38},"generated":{"line":1,"column":1246}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":1251}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":37,"column":10},"generated":{"line":1,"column":1257}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":37,"column":21},"generated":{"line":1,"column":1259}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":37,"column":21},"generated":{"line":1,"column":1261}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":37,"column":28},"generated":{"line":1,"column":1268}},{"source":"../../src/helpers/radspec.js","name":"FunctionFragment","original":{"line":37,"column":34},"generated":{"line":1,"column":1274}},{"source":"../../src/helpers/radspec.js","name":"from","original":{"line":37,"column":51},"generated":{"line":1,"column":1291}},{"source":"../../src/helpers/radspec.js","name":"key","original":{"line":37,"column":56},"generated":{"line":1,"column":1296}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":1299}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":1306}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":1308}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":39,"column":6},"generated":{"line":1,"column":1309}},{"source":"../../src/helpers/radspec.js","name":"getSigHah","original":{"line":39,"column":7},"generated":{"line":1,"column":1310}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":39,"column":17},"generated":{"line":1,"column":1312}},{"source":"../../src/helpers/radspec.js","name":"format","original":{"line":39,"column":26},"generated":{"line":1,"column":1314}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":39,"column":38},"generated":{"line":1,"column":1325}},{"source":"../../src/helpers/radspec.js","name":"source","original":{"line":39,"column":40},"generated":{"line":1,"column":1326}},{"source":"../../src/helpers/radspec.js","name":"functions","original":{"line":39,"column":48},"generated":{"line":1,"column":1333}},{"source":"../../src/helpers/radspec.js","name":"key","original":{"line":39,"column":58},"generated":{"line":1,"column":1335}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":39,"column":64},"generated":{"line":1,"column":1338}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":39,"column":64},"generated":{"line":1,"column":1347}},{"source":"../../src/helpers/radspec.js","name":"acc","original":{"line":40,"column":9},"generated":{"line":1,"column":1351}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":42,"column":5},"generated":{"line":1,"column":1355}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":44,"column":15},"generated":{"line":1,"column":1365}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":44,"column":16},"generated":{"line":1,"column":1366}},{"source":"../../src/helpers/radspec.js","name":"evaluator","original":{"line":44,"column":26},"generated":{"line":1,"column":1368}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":1372}},{"source":"../../src/helpers/radspec.js","name":"addr","original":{"line":54,"column":9},"generated":{"line":1,"column":1378}},{"source":"../../src/helpers/radspec.js","name":"data","original":{"line":54,"column":15},"generated":{"line":1,"column":1380}},{"source":"../../src/helpers/radspec.js","name":"registryAddress","original":{"line":54,"column":21},"generated":{"line":1,"column":1382}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":1387}},{"source":"../../src/helpers/radspec.js","name":"functions","original":{"line":55,"column":10},"generated":{"line":1,"column":1393}},{"source":"../../src/helpers/radspec.js","name":"processFunctions","original":{"line":55,"column":22},"generated":{"line":1,"column":1395}},{"source":"../../src/helpers/radspec.js","name":"knownFunctions","original":{"line":55,"column":39},"generated":{"line":1,"column":1397}},{"source":"../../src/helpers/radspec.js","name":"knownFunctions","original":{"line":55,"column":39},"generated":{"line":1,"column":1399}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":57,"column":4},"generated":{"line":1,"column":1415}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":57,"column":22},"generated":{"line":1,"column":1418}},{"source":"../../src/helpers/radspec.js","name":"data","original":{"line":57,"column":8},"generated":{"line":1,"column":1421}},{"source":"../../src/helpers/radspec.js","name":"length","original":{"line":57,"column":13},"generated":{"line":1,"column":1423}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":1430}},{"source":"../../src/helpers/radspec.js","name":"makeUnknownFunctionNode","original":{"line":58,"column":13},"generated":{"line":1,"column":1437}},{"source":"../../src/helpers/radspec.js","name":"data","original":{"line":58,"column":37},"generated":{"line":1,"column":1439}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":54,"column":41},"generated":{"line":1,"column":1442}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":62,"column":10},"generated":{"line":1,"column":1448}},{"source":"../../src/helpers/radspec.js","name":"data","original":{"line":62,"column":21},"generated":{"line":1,"column":1450}},{"source":"../../src/helpers/radspec.js","name":"substr","original":{"line":62,"column":26},"generated":{"line":1,"column":1452}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":62,"column":33},"generated":{"line":1,"column":1459}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":62,"column":36},"generated":{"line":1,"column":1461}},{"source":"../../src/helpers/radspec.js","name":"fn","original":{"line":63,"column":10},"generated":{"line":1,"column":1465}},{"source":"../../src/helpers/radspec.js","name":"functions","original":{"line":63,"column":15},"generated":{"line":1,"column":1467}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":63,"column":25},"generated":{"line":1,"column":1469}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":1472}},{"source":"../../src/helpers/radspec.js","name":"fn","original":{"line":66,"column":9},"generated":{"line":1,"column":1476}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":1478}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":1482}},{"source":"../../src/helpers/radspec.js","name":"registry","original":{"line":69,"column":14},"generated":{"line":1,"column":1488}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":69,"column":25},"generated":{"line":1,"column":1490}},{"source":"../../src/helpers/radspec.js","name":"MethodRegistry","original":{"line":69,"column":29},"generated":{"line":1,"column":1494}},{"source":"../../src/helpers/radspec.js","name":"MethodRegistry","original":{"line":69,"column":29},"generated":{"line":1,"column":1496}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":69,"column":44},"generated":{"line":1,"column":1504}},{"source":"../../src/helpers/radspec.js","name":"registryAddress","original":{"line":70,"column":10},"generated":{"line":1,"column":1505}},{"source":"../../src/helpers/radspec.js","name":"registryAddress","original":{"line":70,"column":10},"generated":{"line":1,"column":1521}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":71,"column":10},"generated":{"line":1,"column":1523}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":71,"column":10},"generated":{"line":1,"column":1532}},{"source":"../../src/helpers/radspec.js","name":"network","original":{"line":72,"column":10},"generated":{"line":1,"column":1534}},{"source":"../../src/helpers/radspec.js","name":"registryAddress","original":{"line":72,"column":19},"generated":{"line":1,"column":1542}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":72,"column":34},"generated":{"line":1,"column":1549}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":74,"column":21},"generated":{"line":1,"column":1558}},{"source":"../../src/helpers/radspec.js","name":"getNetwork","original":{"line":74,"column":30},"generated":{"line":1,"column":1560}},{"source":"../../src/helpers/radspec.js","name":"chainId","original":{"line":74,"column":44},"generated":{"line":1,"column":1574}},{"source":"../../src/helpers/radspec.js","name":"result","original":{"line":76,"column":14},"generated":{"line":1,"column":1584}},{"source":"../../src/helpers/radspec.js","name":"registry","original":{"line":76,"column":29},"generated":{"line":1,"column":1592}},{"source":"../../src/helpers/radspec.js","name":"lookup","original":{"line":76,"column":38},"generated":{"line":1,"column":1594}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":76,"column":45},"generated":{"line":1,"column":1601}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":77,"column":14},"generated":{"line":1,"column":1605}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":77,"column":16},"generated":{"line":1,"column":1610}},{"source":"../../src/helpers/radspec.js","name":"parse","original":{"line":77,"column":25},"generated":{"line":1,"column":1613}},{"source":"../../src/helpers/radspec.js","name":"result","original":{"line":77,"column":31},"generated":{"line":1,"column":1615}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":1618}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":78,"column":15},"generated":{"line":1,"column":1624}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":79,"column":10},"generated":{"line":1,"column":1625}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":79,"column":16},"generated":{"line":1,"column":1630}},{"source":"../../src/helpers/radspec.js","name":"value","original":{"line":80,"column":10},"generated":{"line":1,"column":1639}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":80,"column":17},"generated":{"line":1,"column":1645}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":82,"column":8},"generated":{"line":1,"column":1648}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1654}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":84,"column":14},"generated":{"line":1,"column":1660}},{"source":"../../src/helpers/radspec.js","name":"results","original":{"line":84,"column":16},"generated":{"line":1,"column":1668}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":84,"column":34},"generated":{"line":1,"column":1677}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":84,"column":34},"generated":{"line":1,"column":1679}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":84,"column":41},"generated":{"line":1,"column":1686}},{"source":"../../src/helpers/radspec.js","name":"fetchJson","original":{"line":84,"column":47},"generated":{"line":1,"column":1692}},{"source":"../../src/helpers/radspec.js","name":"DEFAULT_API_4BYTES","original":{"line":85,"column":13},"generated":{"line":1,"column":1705}},{"source":"../../src/helpers/radspec.js","name":"DEFAULT_API_4BYTES","original":{"line":85,"column":13},"generated":{"line":1,"column":1707}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":85,"column":49},"generated":{"line":1,"column":1743}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":87,"column":8},"generated":{"line":1,"column":1748}},{"source":"../../src/helpers/radspec.js","name":"Array","original":{"line":87,"column":12},"generated":{"line":1,"column":1751}},{"source":"../../src/helpers/radspec.js","name":"isArray","original":{"line":87,"column":18},"generated":{"line":1,"column":1757}},{"source":"../../src/helpers/radspec.js","name":"results","original":{"line":87,"column":26},"generated":{"line":1,"column":1765}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":87,"column":55},"generated":{"line":1,"column":1769}},{"source":"../../src/helpers/radspec.js","name":"results","original":{"line":87,"column":38},"generated":{"line":1,"column":1771}},{"source":"../../src/helpers/radspec.js","name":"length","original":{"line":87,"column":46},"generated":{"line":1,"column":1773}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":87,"column":58},"generated":{"line":1,"column":1780}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":1781}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":88,"column":16},"generated":{"line":1,"column":1787}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":88,"column":18},"generated":{"line":1,"column":1792}},{"source":"../../src/helpers/radspec.js","name":"parse","original":{"line":88,"column":27},"generated":{"line":1,"column":1795}},{"source":"../../src/helpers/radspec.js","name":"results","original":{"line":88,"column":33},"generated":{"line":1,"column":1797}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":88,"column":41},"generated":{"line":1,"column":1799}},{"source":"../../src/helpers/radspec.js","name":"text_signature","original":{"line":88,"column":44},"generated":{"line":1,"column":1802}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":89,"column":10},"generated":{"line":1,"column":1818}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":89,"column":17},"generated":{"line":1,"column":1824}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":90,"column":12},"generated":{"line":1,"column":1825}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":90,"column":18},"generated":{"line":1,"column":1830}},{"source":"../../src/helpers/radspec.js","name":"value","original":{"line":91,"column":12},"generated":{"line":1,"column":1839}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":91,"column":19},"generated":{"line":1,"column":1845}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":1848}},{"source":"../../src/helpers/radspec.js","name":"makeUnknownFunctionNode","original":{"line":95,"column":15},"generated":{"line":1,"column":1855}},{"source":"../../src/helpers/radspec.js","name":"methodId","original":{"line":95,"column":39},"generated":{"line":1,"column":1857}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":54,"column":41},"generated":{"line":1,"column":1860}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":1866}},{"source":"../../src/helpers/radspec.js","name":"source","original":{"line":99,"column":12},"generated":{"line":1,"column":1873}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":1875}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":99,"column":20},"generated":{"line":1,"column":1884}},{"source":"../../src/helpers/radspec.js","name":"fn","original":{"line":99,"column":33},"generated":{"line":1,"column":1887}},{"source":"../../src/helpers/radspec.js","name":"args","original":{"line":104,"column":10},"generated":{"line":1,"column":1889}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":101,"column":28},"generated":{"line":1,"column":1891}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":101,"column":32},"generated":{"line":1,"column":1895}},{"source":"../../src/helpers/radspec.js","name":"ethers","original":{"line":101,"column":32},"generated":{"line":1,"column":1897}},{"source":"../../src/helpers/radspec.js","name":"utils","original":{"line":101,"column":39},"generated":{"line":1,"column":1904}},{"source":"../../src/helpers/radspec.js","name":"Interface","original":{"line":101,"column":45},"generated":{"line":1,"column":1910}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":101,"column":55},"generated":{"line":1,"column":1920}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":101,"column":56},"generated":{"line":1,"column":1921}},{"source":"../../src/helpers/radspec.js","name":"decodeFunctionData","original":{"line":104,"column":33},"generated":{"line":1,"column":1925}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":104,"column":52},"generated":{"line":1,"column":1944}},{"source":"../../src/helpers/radspec.js","name":"name","original":{"line":104,"column":61},"generated":{"line":1,"column":1946}},{"source":"../../src/helpers/radspec.js","name":"data","original":{"line":104,"column":67},"generated":{"line":1,"column":1951}},{"source":"../../src/helpers/radspec.js","name":"parameters","original":{"line":106,"column":10},"generated":{"line":1,"column":1954}},{"source":"../../src/helpers/radspec.js","name":"fragment","original":{"line":106,"column":23},"generated":{"line":1,"column":1956}},{"source":"../../src/helpers/radspec.js","name":"inputs","original":{"line":106,"column":32},"generated":{"line":1,"column":1958}},{"source":"../../src/helpers/radspec.js","name":"reduce","original":{"line":106,"column":39},"generated":{"line":1,"column":1965}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1972}},{"source":"../../src/helpers/radspec.js","name":"parameters","original":{"line":107,"column":7},"generated":{"line":1,"column":1973}},{"source":"../../src/helpers/radspec.js","name":"input","original":{"line":107,"column":19},"generated":{"line":1,"column":1975}},{"source":"../../src/helpers/radspec.js","name":"index","original":{"line":107,"column":26},"generated":{"line":1,"column":1977}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1981}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1983}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":1984}},{"source":"../../src/helpers/radspec.js","name":"index","original":{"line":108,"column":13},"generated":{"line":1,"column":1989}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":108,"column":21},"generated":{"line":1,"column":1991}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":108,"column":27},"generated":{"line":1,"column":1996}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":109,"column":10},"generated":{"line":1,"column":1997}},{"source":"../../src/helpers/radspec.js","name":"input","original":{"line":109,"column":16},"generated":{"line":1,"column":2002}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":109,"column":22},"generated":{"line":1,"column":2004}},{"source":"../../src/helpers/radspec.js","name":"value","original":{"line":110,"column":10},"generated":{"line":1,"column":2009}},{"source":"../../src/helpers/radspec.js","name":"args","original":{"line":110,"column":17},"generated":{"line":1,"column":2015}},{"source":"../../src/helpers/radspec.js","name":"index","original":{"line":110,"column":22},"generated":{"line":1,"column":2017}},{"source":"../../src/helpers/radspec.js","name":"parameters","original":{"line":112,"column":11},"generated":{"line":1,"column":2022}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":114,"column":6},"generated":{"line":1,"column":2025}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":2029}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":117,"column":11},"generated":{"line":1,"column":2035}},{"source":"../../src/helpers/radspec.js","name":"type","original":{"line":118,"column":6},"generated":{"line":1,"column":2036}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":118,"column":12},"generated":{"line":1,"column":2041}},{"source":"../../src/helpers/radspec.js","name":"value","original":{"line":119,"column":6},"generated":{"line":1,"column":2050}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":119,"column":19},"generated":{"line":1,"column":2062}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":119,"column":19},"generated":{"line":1,"column":2064}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":119,"column":19},"generated":{"line":1,"column":2066}},{"source":"../../src/helpers/radspec.js","name":"source","original":{"line":119,"column":31},"generated":{"line":1,"column":2079}},{"source":"../../src/helpers/radspec.js","name":"parameters","original":{"line":119,"column":39},"generated":{"line":1,"column":2081}},{"source":"../../src/helpers/radspec.js","name":null,"original":{"line":119,"column":51},"generated":{"line":1,"column":2083}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":120,"column":8},"generated":{"line":1,"column":2084}},{"source":"../../src/helpers/radspec.js","name":"provider","original":{"line":120,"column":8},"generated":{"line":1,"column":2093}},{"source":"../../src/helpers/radspec.js","name":"availableHelpers","original":{"line":121,"column":8},"generated":{"line":1,"column":2095}},{"source":"../../src/helpers/radspec.js","name":"evaluator","original":{"line":121,"column":26},"generated":{"line":1,"column":2112}},{"source":"../../src/helpers/radspec.js","name":"helpers","original":{"line":121,"column":36},"generated":{"line":1,"column":2114}},{"source":"../../src/helpers/radspec.js","name":"getHelpers","original":{"line":121,"column":44},"generated":{"line":1,"column":2122}},{"source":"../../src/helpers/radspec.js","name":"to","original":{"line":122,"column":8},"generated":{"line":1,"column":2135}},{"source":"../../src/helpers/radspec.js","name":"addr","original":{"line":122,"column":12},"generated":{"line":1,"column":2138}}],"sources":{"../../src/helpers/radspec.js":"import { ethers } from 'ethers'\n\nimport MethodRegistry from './lib/methodRegistry'\nimport { evaluateRaw } from '../lib/'\nimport { knownFunctions } from '../data/'\nimport { DEFAULT_API_4BYTES } from '../defaults'\n\nconst makeUnknownFunctionNode = (methodId) => ({\n  type: 'string',\n  value: `Unknown function (${methodId})`\n})\n\nconst parse = (signature) => {\n  const fragment = ethers.utils.FunctionFragment.from(signature)\n\n  return {\n    name:\n      fragment.name.charAt(0).toUpperCase() +\n      fragment.name\n        .slice(1)\n        .split(/(?=[A-Z])/)\n        .join(' '),\n    args: fragment.inputs.map((input) => {\n      return { type: input.type }\n    })\n  }\n}\n\n// Hash signature with Ethereum Identity and silce bytes\nconst getSigHah = (sig) => ethers.utils.hexDataSlice(ethers.utils.id(sig), 0, 4)\n\n// Convert from the knownFunctions data format into the needed format\n// Input: { \"signature(type1,type2)\": \"Its radspec string\", ... }\n// Output: { \"0xabcdef12\": { \"fragment\": FunctionFragment, \"source\": \"Its radspec string\" }, ...}\nconst processFunctions = (functions) =>\n  Object.keys(functions).reduce((acc, key) => {\n    const fragment = ethers.utils.FunctionFragment.from(key)\n    return {\n      [getSigHah(fragment.format())]: { source: functions[key], fragment },\n      ...acc\n    }\n  }, {})\n\nexport default (provider, evaluator) =>\n  /**\n   * Interpret calldata using radspec recursively. If the function signature is not in the package's known\n   * functions, it fallbacks to looking for the function name using github.com/parity-contracts/signature-registry\n   *\n   * @param {address} addr The target address of the call\n   * @param {bytes} data The calldata of the call\n   * @param {string} [registryAddress] The registry address to lookup descriptions\n   * @return {Promise<radspec/evaluator/TypedValue>}\n   */\n  async (addr, data, registryAddress) => {\n    const functions = processFunctions(knownFunctions)\n\n    if (data.length < 10) {\n      return makeUnknownFunctionNode(data)\n    }\n\n    // Get method ID\n    const methodId = data.substr(0, 10)\n    const fn = functions[methodId]\n\n    // If function is not a known function\n    if (!fn) {\n      try {\n        // Try checking on-chain signature registry\n        const registry = new MethodRegistry({\n          registryAddress,\n          provider,\n          network: registryAddress\n            ? undefined\n            : (await provider.getNetwork()).chainId\n        })\n        const result = await registry.lookup(methodId)\n        const { name } = parse(result)\n        return {\n          type: 'string',\n          value: name // TODO: should we decode and print the arguments as well?\n        }\n      } catch {\n        // Try fetching 4bytes API\n        const { results } = await ethers.utils.fetchJson(\n          `${DEFAULT_API_4BYTES}?hex_signature=${methodId}`\n        )\n        if (Array.isArray(results) && results.length > 0) {\n          const { name } = parse(results[0].text_signature)\n          return {\n            type: 'string',\n            value: name\n          }\n        }\n        // Fallback to unknown function\n        return makeUnknownFunctionNode(methodId)\n      }\n    }\n    // If the function was found in local radspec registry. Decode and evaluate.\n    const { source, fragment } = fn\n\n    const ethersInterface = new ethers.utils.Interface([fragment])\n\n    // Decode parameters\n    const args = ethersInterface.decodeFunctionData(fragment.name, data)\n\n    const parameters = fragment.inputs.reduce(\n      (parameters, input, index) => ({\n        [`$${index + 1}`]: {\n          type: input.type,\n          value: args[index]\n        },\n        ...parameters\n      }),\n      {}\n    )\n\n    return {\n      type: 'string',\n      value: await evaluateRaw(source, parameters, {\n        provider,\n        availableHelpers: evaluator.helpers.getHelpers(),\n        to: addr\n      })\n    }\n  }\n"},"lineCount":null}},"error":null,"hash":"29893a4775ead7c127a40a5a254be520","cacheData":{"env":{}}}