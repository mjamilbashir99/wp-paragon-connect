{"id":"node_modules/@aragon/connect-core/dist/utils/radspec/index.js","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js.map","includedInParent":true,"mtime":1594248789000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595855422975},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\package.json","includedInParent":true,"mtime":1595838173215},{"name":"radspec","loc":{"line":23,"column":37},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\index.js"},{"name":"../address","loc":{"line":24,"column":26},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\address.js"},{"name":"../app","loc":{"line":25,"column":22},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\app.js"},{"name":"./postprocess","loc":{"line":66,"column":28},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\postprocess.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tryEvaluatingRadspec = void 0;\nconst radspec = __importStar(require(\"radspec\"));\nconst address_1 = require(\"../address\");\nconst app_1 = require(\"../app\");\n/**\n * Attempt to describe intent via radspec.\n */\nasync function tryEvaluatingRadspec(intent, apps, provider // Decorated intent with description, if one could be made\n) {\n    const app = apps.find(app => address_1.addressesEqual(app.address, intent.to));\n    // If the intent matches an installed app, use only that app to search for a\n    // method match, otherwise fallback to searching all installed apps\n    const appsToSearch = app ? [app] : apps;\n    const foundMethod = appsToSearch.reduce((found, app) => {\n        if (found) {\n            return found;\n        }\n        const method = app_1.findAppMethodFromIntent(app, intent);\n        if (method) {\n            return {\n                method,\n                // This is not very nice, but some apps don't have ABIs attached to their function\n                // declarations and so we have to fall back to using their full app ABI\n                // TODO: define a more concrete schema around the artifact.json's `function.abi`\n                abi: method.abi ? [method.abi] : app.abi,\n            };\n        }\n    }, undefined);\n    const { abi, method } = foundMethod || {};\n    let evaluatedNotice;\n    if (method && method.notice) {\n        try {\n            evaluatedNotice = await radspec.evaluate(method.notice, {\n                abi,\n                transaction: intent,\n            }, { provider: provider });\n        }\n        catch (err) {\n            console.error(`Could not evaluate a description for given transaction data: ${intent.data}`, err);\n        }\n    }\n    return evaluatedNotice;\n}\nexports.tryEvaluatingRadspec = tryEvaluatingRadspec;\nvar postprocess_1 = require(\"./postprocess\");\nObject.defineProperty(exports, \"postprocessRadspecDescription\", { enumerable: true, get: function () { return postprocess_1.postprocessRadspecDescription; } });\n"},"sourceMaps":{"js":{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/utils/radspec/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA,iDAAkC;AAElC,wCAA2C;AAC3C,gCAAgD;AAUhD;;GAEG;AACI,KAAK,UAAU,oBAAoB,CACxC,MAA8B,EAC9B,IAAW,EACX,QAAoC,CAAC,0DAA0D;;IAE/F,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,wBAAc,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAA;IAEpE,4EAA4E;IAC5E,mEAAmE;IACnE,MAAM,YAAY,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;IACvC,MAAM,WAAW,GAAG,YAAY,CAAC,MAAM,CACrC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;QACb,IAAI,KAAK,EAAE;YACT,OAAO,KAAK,CAAA;SACb;QAED,MAAM,MAAM,GAAG,6BAAuB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;QACnD,IAAI,MAAM,EAAE;YACV,OAAO;gBACL,MAAM;gBACN,kFAAkF;gBAClF,uEAAuE;gBACvE,gFAAgF;gBAChF,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG;aACzC,CAAA;SACF;IACH,CAAC,EACD,SAAS,CACV,CAAA;IAED,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,WAAW,IAAI,EAAE,CAAA;IAEzC,IAAI,eAAe,CAAA;IACnB,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,EAAE;QAC3B,IAAI;YACF,eAAe,GAAG,MAAM,OAAO,CAAC,QAAQ,CACtC,MAAM,CAAC,MAAM,EACb;gBACE,GAAG;gBACH,WAAW,EAAE,MAAM;aACpB,EACD,EAAE,QAAQ,EAAE,QAAQ,EAAE,CACvB,CAAA;SACF;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CACX,gEAAgE,MAAM,CAAC,IAAI,EAAE,EAC7E,GAAG,CACJ,CAAA;SACF;KACF;IAED,OAAO,eAAe,CAAA;AACxB,CAAC;AApDD,oDAoDC;AAED,6CAGsB;AAFpB,4HAAA,6BAA6B,OAAA","sourcesContent":[null]}},"error":null,"hash":"42ca5f9936806fd2e4b1eec99377d732","cacheData":{"env":{}}}