{"id":"node_modules/@aragon/connect-core/dist/entities/Organization.js","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\entities\\Organization.js.map","includedInParent":true,"mtime":1594248789000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595855422975},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\package.json","includedInParent":true,"mtime":1595838173215},{"name":"ethers","loc":{"line":20,"column":25},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\entities\\Organization.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\ethers\\dist\\ethers.umd.js"},{"name":"../transactions/TransactionIntent","loc":{"line":21,"column":52},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\entities\\Organization.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\transactions\\TransactionIntent.js"},{"name":"../params","loc":{"line":22,"column":25},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\entities\\Organization.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\params.js"},{"name":"../utils/misc","loc":{"line":23,"column":23},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\entities\\Organization.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\misc.js"}],"generated":{"js":"\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _address, _provider, _connected;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ethers_1 = require(\"ethers\");\nconst TransactionIntent_1 = __importDefault(require(\"../transactions/TransactionIntent\"));\nconst params_1 = require(\"../params\");\nconst misc_1 = require(\"../utils/misc\");\nfunction normalizeAppFilters(filters) {\n    var _a;\n    if (!filters) {\n        return {};\n    }\n    if (typeof filters === 'string') {\n        return filters.startsWith('0x')\n            ? { address: [filters] }\n            : { name: [filters] };\n    }\n    if (Array.isArray(filters)) {\n        return ((_a = filters[0]) === null || _a === void 0 ? void 0 : _a.startsWith('0x')) ? { address: filters }\n            : { name: filters };\n    }\n    if (filters.address) {\n        return { address: misc_1.toArrayEntry(filters.address) };\n    }\n    if (filters.name) {\n        return { name: misc_1.toArrayEntry(filters.name) };\n    }\n    return {};\n}\nclass Organization {\n    constructor(location, connector, provider, network) {\n        _address.set(this, void 0);\n        _provider.set(this, void 0);\n        _connected.set(this, void 0);\n        this.location = location;\n        const getEthersProvider = () => {\n            try {\n                return new ethers_1.ethers.providers.Web3Provider(provider, network);\n            }\n            catch (e) {\n                return provider;\n            }\n        };\n        __classPrivateFieldSet(this, _provider, provider\n            ? getEthersProvider()\n            : network.chainId === 100\n                ? new ethers_1.ethers.providers.WebSocketProvider(params_1.XDAI_WSS_ENDPOINT, network)\n                : ethers_1.ethers.getDefaultProvider(network));\n        this._connector = connector;\n        __classPrivateFieldSet(this, _connected, false);\n    }\n    async _connect() {\n        __classPrivateFieldSet(this, _address, ethers_1.ethers.utils.isAddress(this.location)\n            ? this.location\n            : await __classPrivateFieldGet(this, _provider).resolveName(this.location));\n        if (!ethers_1.ethers.utils.isAddress(__classPrivateFieldGet(this, _address) || '')) {\n            throw new Error('Please provide a valid address or ENS domain.');\n        }\n        __classPrivateFieldSet(this, _connected, true);\n        return true;\n    }\n    checkConnected() {\n        if (!__classPrivateFieldGet(this, _connected)) {\n            throw new Error('Please call ._connect() before using Organization and its methods.');\n        }\n    }\n    get address() {\n        this.checkConnected();\n        return __classPrivateFieldGet(this, _address) || ''; // The || '' should never happen but TypeScript requires it.\n    }\n    get provider() {\n        this.checkConnected();\n        return __classPrivateFieldGet(this, _provider);\n    }\n    ///////// APPS ///////////\n    async app(filters) {\n        this.checkConnected();\n        return this._connector.appForOrg(this.address, normalizeAppFilters(filters));\n    }\n    async apps(filters) {\n        this.checkConnected();\n        return this._connector.appsForOrg(this.address, normalizeAppFilters(filters));\n    }\n    onApp(filtersOrCallback, callback) {\n        this.checkConnected();\n        const filters = (callback ? filtersOrCallback : null);\n        const _callback = (callback || filtersOrCallback);\n        return this._connector.onAppForOrg(this.address, normalizeAppFilters(filters), _callback);\n    }\n    onApps(filtersOrCallback, callback) {\n        this.checkConnected();\n        const filters = (callback ? filtersOrCallback : null);\n        const _callback = (callback || filtersOrCallback);\n        return this._connector.onAppsForOrg(this.address, normalizeAppFilters(filters), _callback);\n    }\n    ///////// PERMISSIONS ///////////\n    async permissions() {\n        this.checkConnected();\n        return this._connector.permissionsForOrg(this.address);\n    }\n    onPermissions(callback) {\n        this.checkConnected();\n        return this._connector.onPermissionsForOrg(this.address, callback);\n    }\n    ///////// INTENTS ///////////\n    appIntent(appAddress, funcName, funcArgs) {\n        this.checkConnected();\n        return new TransactionIntent_1.default({\n            contractAddress: appAddress,\n            functionName: funcName,\n            functionArgs: funcArgs,\n        }, this, __classPrivateFieldGet(this, _provider));\n    }\n}\nexports.default = Organization;\n_address = new WeakMap(), _provider = new WeakMap(), _connected = new WeakMap();\n"},"sourceMaps":{"js":{"version":3,"file":"Organization.js","sourceRoot":"","sources":["../../src/entities/Organization.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"5372637eacbddf7812442dbfeb529033","cacheData":{"env":{}}}