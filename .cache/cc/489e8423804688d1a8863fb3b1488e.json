{"id":"ZSSW","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\tokenAmount.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595838175389},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\package.json","includedInParent":true,"mtime":1595838173348},{"name":"ethers","loc":{"line":1,"column":111},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\tokenAmount.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\ethers\\dist\\ethers.umd.js"},{"name":"./lib/token","loc":{"line":1,"column":136},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\tokenAmount.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\lib\\token.js"},{"name":"./lib/formatBN","loc":{"line":1,"column":169},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\tokenAmount.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\radspec\\dist\\helpers\\lib\\formatBN.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"ethers\"),t=require(\"./lib/token\"),r=require(\"./lib/formatBN\"),i=i=>async(o,s,a=!0,l)=>{const u=e.BigNumber.from(s),n=!!l;let f,m;if(o===t.ETH)f=e.BigNumber.from(18),a&&(m=\"ETH\");else{let r=new e.ethers.Contract(o,t.ERC20_SYMBOL_DECIMALS_ABI,i);if(f=e.BigNumber.from(await r.decimals()),a)try{m=await r.symbol()||\"\"}catch(B){r=new e.ethers.Contract(o,t.ERC20_SYMBOL_BYTES32_ABI,i),m=(m=await r.symbol()||\"\")&&e.ethers.utils.toUtf8String(m)}}l=l||f;const c=(0,r.formatBN)(u,(0,r.tenPow)(f),+l,n);return{type:\"string\",value:a?`${c} ${m}`:c}};exports.default=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/helpers/tokenAmount.js","name":"provider","original":{"line":10,"column":16},"generated":{"line":1,"column":170}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":173}},{"source":"../../src/helpers/tokenAmount.js","name":"tokenAddress","original":{"line":20,"column":9},"generated":{"line":1,"column":179}},{"source":"../../src/helpers/tokenAmount.js","name":"amount","original":{"line":20,"column":23},"generated":{"line":1,"column":181}},{"source":"../../src/helpers/tokenAmount.js","name":"showSymbol","original":{"line":20,"column":31},"generated":{"line":1,"column":183}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":20,"column":41},"generated":{"line":1,"column":186}},{"source":"../../src/helpers/tokenAmount.js","name":"precision","original":{"line":20,"column":50},"generated":{"line":1,"column":188}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":20,"column":64},"generated":{"line":1,"column":193}},{"source":"../../src/helpers/tokenAmount.js","name":"amountBn","original":{"line":21,"column":10},"generated":{"line":1,"column":199}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":21,"column":21},"generated":{"line":1,"column":201}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":21,"column":21},"generated":{"line":1,"column":203}},{"source":"../../src/helpers/tokenAmount.js","name":"from","original":{"line":21,"column":31},"generated":{"line":1,"column":213}},{"source":"../../src/helpers/tokenAmount.js","name":"amount","original":{"line":21,"column":36},"generated":{"line":1,"column":218}},{"source":"../../src/helpers/tokenAmount.js","name":"fixed","original":{"line":22,"column":10},"generated":{"line":1,"column":221}},{"source":"../../src/helpers/tokenAmount.js","name":"precision","original":{"line":22,"column":20},"generated":{"line":1,"column":225}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":20,"column":64},"generated":{"line":1,"column":227}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":24,"column":8},"generated":{"line":1,"column":231}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":25,"column":8},"generated":{"line":1,"column":233}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":27,"column":4},"generated":{"line":1,"column":235}},{"source":"../../src/helpers/tokenAmount.js","name":"tokenAddress","original":{"line":27,"column":8},"generated":{"line":1,"column":238}},{"source":"../../src/helpers/tokenAmount.js","name":"ETH","original":{"line":27,"column":25},"generated":{"line":1,"column":242}},{"source":"../../src/helpers/tokenAmount.js","name":"ETH","original":{"line":27,"column":25},"generated":{"line":1,"column":244}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":28,"column":6},"generated":{"line":1,"column":248}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":28,"column":17},"generated":{"line":1,"column":250}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":28,"column":17},"generated":{"line":1,"column":252}},{"source":"../../src/helpers/tokenAmount.js","name":"from","original":{"line":28,"column":27},"generated":{"line":1,"column":262}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":28,"column":32},"generated":{"line":1,"column":267}},{"source":"../../src/helpers/tokenAmount.js","name":"showSymbol","original":{"line":29,"column":10},"generated":{"line":1,"column":271}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":30,"column":8},"generated":{"line":1,"column":275}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":30,"column":17},"generated":{"line":1,"column":277}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":32,"column":11},"generated":{"line":1,"column":288}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":289}},{"source":"../../src/helpers/tokenAmount.js","name":"token","original":{"line":33,"column":10},"generated":{"line":1,"column":293}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":33,"column":18},"generated":{"line":1,"column":295}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":33,"column":22},"generated":{"line":1,"column":299}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":33,"column":22},"generated":{"line":1,"column":301}},{"source":"../../src/helpers/tokenAmount.js","name":"Contract","original":{"line":33,"column":29},"generated":{"line":1,"column":308}},{"source":"../../src/helpers/tokenAmount.js","name":"tokenAddress","original":{"line":34,"column":8},"generated":{"line":1,"column":317}},{"source":"../../src/helpers/tokenAmount.js","name":"ERC20_SYMBOL_DECIMALS_ABI","original":{"line":35,"column":8},"generated":{"line":1,"column":319}},{"source":"../../src/helpers/tokenAmount.js","name":"ERC20_SYMBOL_DECIMALS_ABI","original":{"line":35,"column":8},"generated":{"line":1,"column":321}},{"source":"../../src/helpers/tokenAmount.js","name":"provider","original":{"line":36,"column":8},"generated":{"line":1,"column":347}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":40,"column":6},"generated":{"line":1,"column":350}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":39,"column":6},"generated":{"line":1,"column":353}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":39,"column":17},"generated":{"line":1,"column":355}},{"source":"../../src/helpers/tokenAmount.js","name":"BigNumber","original":{"line":39,"column":17},"generated":{"line":1,"column":357}},{"source":"../../src/helpers/tokenAmount.js","name":"from","original":{"line":39,"column":27},"generated":{"line":1,"column":367}},{"source":"../../src/helpers/tokenAmount.js","name":"token","original":{"line":39,"column":38},"generated":{"line":1,"column":378}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":39,"column":44},"generated":{"line":1,"column":380}},{"source":"../../src/helpers/tokenAmount.js","name":"showSymbol","original":{"line":40,"column":10},"generated":{"line":1,"column":392}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":41,"column":8},"generated":{"line":1,"column":394}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":42,"column":10},"generated":{"line":1,"column":398}},{"source":"../../src/helpers/tokenAmount.js","name":"token","original":{"line":42,"column":26},"generated":{"line":1,"column":406}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":42,"column":32},"generated":{"line":1,"column":408}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":42,"column":45},"generated":{"line":1,"column":418}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":43,"column":10},"generated":{"line":1,"column":421}},{"source":"../../src/helpers/tokenAmount.js","name":"err","original":{"line":43,"column":17},"generated":{"line":1,"column":427}},{"source":"../../src/helpers/tokenAmount.js","name":"token","original":{"line":45,"column":10},"generated":{"line":1,"column":430}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":45,"column":18},"generated":{"line":1,"column":432}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":45,"column":22},"generated":{"line":1,"column":436}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":45,"column":22},"generated":{"line":1,"column":438}},{"source":"../../src/helpers/tokenAmount.js","name":"Contract","original":{"line":45,"column":29},"generated":{"line":1,"column":445}},{"source":"../../src/helpers/tokenAmount.js","name":"tokenAddress","original":{"line":46,"column":12},"generated":{"line":1,"column":454}},{"source":"../../src/helpers/tokenAmount.js","name":"ERC20_SYMBOL_BYTES32_ABI","original":{"line":47,"column":12},"generated":{"line":1,"column":456}},{"source":"../../src/helpers/tokenAmount.js","name":"ERC20_SYMBOL_BYTES32_ABI","original":{"line":47,"column":12},"generated":{"line":1,"column":458}},{"source":"../../src/helpers/tokenAmount.js","name":"provider","original":{"line":48,"column":12},"generated":{"line":1,"column":483}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":51,"column":10},"generated":{"line":1,"column":486}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":50,"column":10},"generated":{"line":1,"column":489}},{"source":"../../src/helpers/tokenAmount.js","name":"token","original":{"line":50,"column":26},"generated":{"line":1,"column":497}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":50,"column":32},"generated":{"line":1,"column":499}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":50,"column":45},"generated":{"line":1,"column":509}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":51,"column":29},"generated":{"line":1,"column":514}},{"source":"../../src/helpers/tokenAmount.js","name":"ethers","original":{"line":51,"column":29},"generated":{"line":1,"column":516}},{"source":"../../src/helpers/tokenAmount.js","name":"utils","original":{"line":51,"column":36},"generated":{"line":1,"column":523}},{"source":"../../src/helpers/tokenAmount.js","name":"toUtf8String","original":{"line":51,"column":42},"generated":{"line":1,"column":529}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":51,"column":55},"generated":{"line":1,"column":542}},{"source":"../../src/helpers/tokenAmount.js","name":"precision","original":{"line":56,"column":4},"generated":{"line":1,"column":546}},{"source":"../../src/helpers/tokenAmount.js","name":"precision","original":{"line":56,"column":16},"generated":{"line":1,"column":548}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":56,"column":29},"generated":{"line":1,"column":551}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":58,"column":4},"generated":{"line":1,"column":553}},{"source":"../../src/helpers/tokenAmount.js","name":"formattedAmount","original":{"line":58,"column":10},"generated":{"line":1,"column":559}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":562}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":564}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":566}},{"source":"../../src/helpers/tokenAmount.js","name":"amountBn","original":{"line":59,"column":6},"generated":{"line":1,"column":576}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":579}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":581}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":583}},{"source":"../../src/helpers/tokenAmount.js","name":"decimals","original":{"line":60,"column":13},"generated":{"line":1,"column":591}},{"source":"../../src/helpers/tokenAmount.js","name":"precision","original":{"line":61,"column":13},"generated":{"line":1,"column":595}},{"source":"../../src/helpers/tokenAmount.js","name":"fixed","original":{"line":62,"column":6},"generated":{"line":1,"column":597}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":65,"column":4},"generated":{"line":1,"column":600}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":606}},{"source":"../../src/helpers/tokenAmount.js","name":"type","original":{"line":66,"column":6},"generated":{"line":1,"column":607}},{"source":"../../src/helpers/tokenAmount.js","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":612}},{"source":"../../src/helpers/tokenAmount.js","name":"value","original":{"line":67,"column":6},"generated":{"line":1,"column":621}},{"source":"../../src/helpers/tokenAmount.js","name":"showSymbol","original":{"line":67,"column":13},"generated":{"line":1,"column":627}},{"source":"../../src/helpers/tokenAmount.js","name":"formattedAmount","original":{"line":67,"column":29},"generated":{"line":1,"column":632}},{"source":"../../src/helpers/tokenAmount.js","name":"symbol","original":{"line":67,"column":48},"generated":{"line":1,"column":637}},{"source":"../../src/helpers/tokenAmount.js","name":"formattedAmount","original":{"line":67,"column":59},"generated":{"line":1,"column":641}}],"sources":{"../../src/helpers/tokenAmount.js":"import { ethers, BigNumber } from 'ethers'\n\nimport {\n  ERC20_SYMBOL_BYTES32_ABI,\n  ERC20_SYMBOL_DECIMALS_ABI,\n  ETH\n} from './lib/token'\nimport { formatBN, tenPow } from './lib/formatBN'\n\nexport default (provider) =>\n  /**\n   * Format token amounts taking decimals into account\n   *\n   * @param {string} tokenAddress The address of the token\n   * @param {*} amount The absolute amount for the token quantity (wei)\n   * @param {bool} showSymbol Whether the token symbol will be printed after the amount\n   * @param {*} precision The number of decimal places to format to. If set, the precision is always enforced.\n   * @return {Promise<radspec/evaluator/TypedValue>}\n   */\n  async (tokenAddress, amount, showSymbol = true, precision) => {\n    const amountBn = BigNumber.from(amount)\n    const fixed = !!precision\n\n    let decimals\n    let symbol\n\n    if (tokenAddress === ETH) {\n      decimals = BigNumber.from(18)\n      if (showSymbol) {\n        symbol = 'ETH'\n      }\n    } else {\n      let token = new ethers.Contract(\n        tokenAddress,\n        ERC20_SYMBOL_DECIMALS_ABI,\n        provider\n      )\n\n      decimals = BigNumber.from(await token.decimals())\n      if (showSymbol) {\n        try {\n          symbol = (await token.symbol()) || ''\n        } catch (err) {\n          // Some tokens (e.g. DS-Token) use bytes32 for their symbol()\n          token = new ethers.Contract(\n            tokenAddress,\n            ERC20_SYMBOL_BYTES32_ABI,\n            provider\n          )\n          symbol = (await token.symbol()) || ''\n          symbol = symbol && ethers.utils.toUtf8String(symbol)\n        }\n      }\n    }\n\n    precision = precision || decimals\n\n    const formattedAmount = formatBN(\n      amountBn,\n      tenPow(decimals),\n      Number(precision),\n      fixed\n    )\n\n    return {\n      type: 'string',\n      value: showSymbol ? `${formattedAmount} ${symbol}` : formattedAmount\n    }\n  }\n"},"lineCount":null}},"error":null,"hash":"8c99ddb0bccf891ad04e36e8cfae59bb","cacheData":{"env":{}}}