{"id":"node_modules/@aragon/connect-thegraph/dist/parsers/roles.js","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-thegraph\\dist\\parsers\\roles.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595855422975},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-thegraph\\package.json","includedInParent":true,"mtime":1595838173348},{"name":"@aragon/connect-core","loc":{"line":4,"column":31},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-thegraph\\dist\\parsers\\roles.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseRoles = exports.parseRole = void 0;\nconst connect_core_1 = require(\"@aragon/connect-core\");\nasync function _parseRole(role, app, connector) {\n    var _a, _b;\n    const grantees = (role === null || role === void 0 ? void 0 : role.grantees) && (role === null || role === void 0 ? void 0 : role.grantees.map((permission) => {\n        return {\n            appAddress: permission.appAddress,\n            allowed: permission.allowed,\n            granteeAddress: permission.granteeAddress,\n            params: permission.params.map((param) => {\n                return {\n                    argumentId: param.argumentId,\n                    operationType: param.operationType,\n                    argumentValue: param.argumentValue,\n                };\n            }) || [],\n            roleHash: permission.roleHash,\n        };\n    }));\n    const roleData = {\n        appAddress: role.appAddress,\n        manager: role.manager,\n        hash: role.roleHash,\n        grantees,\n        appId: app.appId,\n        artifact: (_a = app.version) === null || _a === void 0 ? void 0 : _a.artifact,\n        contentUri: (_b = app.version) === null || _b === void 0 ? void 0 : _b.contentUri,\n    };\n    return connect_core_1.Role.create(roleData, connector);\n}\nasync function parseRole(result, connector) {\n    const app = result.data.app;\n    const role = result.data.role;\n    if (!role) {\n        throw new Error('Unable to parse role.');\n    }\n    return _parseRole(role, app, connector);\n}\nexports.parseRole = parseRole;\nasync function parseRoles(result, connector) {\n    const app = result.data.app;\n    const roles = app === null || app === void 0 ? void 0 : app.roles;\n    if (!roles) {\n        throw new Error('Unable to parse roles.');\n    }\n    return Promise.all(roles.map(async (role) => {\n        return _parseRole(role, app, connector);\n    }));\n}\nexports.parseRoles = parseRoles;\n"},"sourceMaps":{"js":{"version":3,"file":"roles.js","sourceRoot":"","sources":["../../src/parsers/roles.ts"],"names":[],"mappings":";;;AAAA,uDAAqE;AAGrE,KAAK,UAAU,UAAU,CAAC,IAAS,EAAE,GAAQ,EAAE,SAAc;;IAC3D,MAAM,QAAQ,GACZ,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,MACd,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,CAAC,GAAG,CAChB,CAAC,UAAe,EAAkB,EAAE;QAClC,OAAO;YACL,UAAU,EAAE,UAAU,CAAC,UAAU;YACjC,OAAO,EAAE,UAAU,CAAC,OAAO;YAC3B,cAAc,EAAE,UAAU,CAAC,cAAc;YACzC,MAAM,EACJ,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE;gBACnC,OAAO;oBACL,UAAU,EAAE,KAAK,CAAC,UAAU;oBAC5B,aAAa,EAAE,KAAK,CAAC,aAAa;oBAClC,aAAa,EAAE,KAAK,CAAC,aAAa;iBACnC,CAAA;YACH,CAAC,CAAC,IAAI,EAAE;YACV,QAAQ,EAAE,UAAU,CAAC,QAAQ;SAC9B,CAAA;IACH,CAAC,EACF,CAAA;IAEH,MAAM,QAAQ,GAAa;QACzB,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,OAAO,EAAE,IAAI,CAAC,OAAO;QACrB,IAAI,EAAE,IAAI,CAAC,QAAQ;QACnB,QAAQ;QACR,KAAK,EAAE,GAAG,CAAC,KAAK;QAChB,QAAQ,QAAE,GAAG,CAAC,OAAO,0CAAE,QAAQ;QAC/B,UAAU,QAAE,GAAG,CAAC,OAAO,0CAAE,UAAU;KACpC,CAAA;IAED,OAAO,mBAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;AACzC,CAAC;AAEM,KAAK,UAAU,SAAS,CAC7B,MAAmB,EACnB,SAAc;IAEd,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAA;IAC3B,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAA;IAE7B,IAAI,CAAC,IAAI,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAA;KACzC;IAED,OAAO,UAAU,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,CAAC,CAAA;AACzC,CAAC;AAZD,8BAYC;AAEM,KAAK,UAAU,UAAU,CAC9B,MAAmB,EACnB,SAAc;IAEd,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAA;IAC3B,MAAM,KAAK,GAAG,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,KAAK,CAAA;IAExB,IAAI,CAAC,KAAK,EAAE;QACV,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAA;KAC1C;IAED,OAAO,OAAO,CAAC,GAAG,CAChB,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,IAAS,EAAE,EAAE;QAC5B,OAAO,UAAU,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,CAAC,CAAA;IACzC,CAAC,CAAC,CACH,CAAA;AACH,CAAC;AAhBD,gCAgBC","sourcesContent":[null]}},"error":null,"hash":"25d4dd6f67c09d6ad1b172a93f608c03","cacheData":{"env":{}}}