{"id":"node_modules/@aragon/connect-core/dist/utils/descriptions.js","dependencies":[{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\descriptions.js.map","includedInParent":true,"mtime":1594248789000},{"name":"C:\\xampp\\htdocs\\aragon-connect\\package.json","includedInParent":true,"mtime":1595855422975},{"name":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\package.json","includedInParent":true,"mtime":1595838173215},{"name":"../transactions/TransactionRequest","loc":{"line":7,"column":53},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\descriptions.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\transactions\\TransactionRequest.js"},{"name":"./path/decodePath","loc":{"line":8,"column":29},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\descriptions.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\path\\decodePath.js"},{"name":"./radspec/index","loc":{"line":9,"column":24},"parent":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\descriptions.js","resolved":"C:\\xampp\\htdocs\\aragon-connect\\node_modules\\@aragon\\connect-core\\dist\\utils\\radspec\\index.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.describeScript = exports.describeTransactionPath = exports.describeTransaction = void 0;\nconst TransactionRequest_1 = __importDefault(require(\"../transactions/TransactionRequest\"));\nconst decodePath_1 = require(\"./path/decodePath\");\nconst index_1 = require(\"./radspec/index\");\nasync function describeTransaction(transaction, apps, provider) {\n    if (!transaction.to) {\n        throw new Error(`Could not describe transaction: missing 'to'`);\n    }\n    if (!transaction.data) {\n        throw new Error(`Could not describe transaction: missing 'data'`);\n    }\n    let description, descriptionAnnotated;\n    try {\n        description = await index_1.tryEvaluatingRadspec(transaction, apps, provider);\n        if (description) {\n            const processed = await index_1.postprocessRadspecDescription(description, apps);\n            descriptionAnnotated = processed.annotatedDescription;\n            description = processed.description;\n        }\n        if (transaction.children) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            transaction.children = await describeTransactionPath(transaction.children, apps, provider);\n        }\n    }\n    catch (err) {\n        throw new Error(`Could not describe transaction: ${err}`);\n    }\n    return new TransactionRequest_1.default({\n        ...transaction,\n        description,\n        descriptionAnnotated,\n    });\n}\nexports.describeTransaction = describeTransaction;\n/**\n * Use radspec to create a human-readable description for each transaction in the given `path`\n *\n */\nasync function describeTransactionPath(path, apps, provider) {\n    return Promise.all(path.map(step => describeTransaction(step, apps, provider)));\n}\nexports.describeTransactionPath = describeTransactionPath;\nasync function describeScript(script, apps, provider) {\n    const path = decodePath_1.decodeTransactionPath(script);\n    return describeTransactionPath(path, apps, provider);\n}\nexports.describeScript = describeScript;\n"},"sourceMaps":{"js":{"version":3,"file":"descriptions.js","sourceRoot":"","sources":["../../src/utils/descriptions.ts"],"names":[],"mappings":";;;;;;AAGA,4FAAmE;AACnE,kDAG0B;AAC1B,2CAGwB;AAEjB,KAAK,UAAU,mBAAmB,CACvC,WAAoC,EACpC,IAAW,EACX,QAAoC;IAEpC,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE;QACnB,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAA;KAChE;IACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;QACrB,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAA;KAClE;IACD,IAAI,WAAW,EAAE,oBAAoB,CAAA;IACrC,IAAI;QACF,WAAW,GAAG,MAAM,4BAAoB,CAAC,WAAW,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;QAErE,IAAI,WAAW,EAAE;YACf,MAAM,SAAS,GAAG,MAAM,qCAA6B,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;YACxE,oBAAoB,GAAG,SAAS,CAAC,oBAAoB,CAAA;YACrD,WAAW,GAAG,SAAS,CAAC,WAAW,CAAA;SACpC;QAED,IAAI,WAAW,CAAC,QAAQ,EAAE;YACxB,mEAAmE;YACnE,WAAW,CAAC,QAAQ,GAAG,MAAM,uBAAuB,CAClD,WAAW,CAAC,QAAQ,EACpB,IAAI,EACJ,QAAQ,CACT,CAAA;SACF;KACF;IAAC,OAAO,GAAG,EAAE;QACZ,MAAM,IAAI,KAAK,CAAC,mCAAmC,GAAG,EAAE,CAAC,CAAA;KAC1D;IAED,OAAO,IAAI,4BAAkB,CAAC;QAC5B,GAAG,WAAW;QACd,WAAW;QACX,oBAAoB;KACrB,CAAC,CAAA;AACJ,CAAC;AAtCD,kDAsCC;AAED;;;GAGG;AACI,KAAK,UAAU,uBAAuB,CAC3C,IAA+B,EAC/B,IAAW,EACX,QAAoC;IAEpC,OAAO,OAAO,CAAC,GAAG,CAChB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAC5D,CAAA;AACH,CAAC;AARD,0DAQC;AAEM,KAAK,UAAU,cAAc,CAClC,MAAc,EACd,IAAW,EACX,QAAoC;IAEpC,MAAM,IAAI,GAAG,kCAAqB,CAAC,MAAM,CAAC,CAAA;IAE1C,OAAO,uBAAuB,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAA;AACtD,CAAC;AARD,wCAQC","sourcesContent":[null]}},"error":null,"hash":"a4e6633b36546a1fadbb4aed5a59abc6","cacheData":{"env":{}}}